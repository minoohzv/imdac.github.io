(window.webpackJsonp=window.webpackJsonp||[]).push([[334],{542:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("div",{staticClass:"watch"},[a("p",[a("a",{attrs:{href:"https://www.linkedin.com/learning/php-accessing-databases-with-pdo-and-mysqli/using-named-parameters",target:"_blank",rel:"noopener noreferrer"}},[t._v('Watch "Using named parameters" on LinkedIn Learning'),a("OutboundLink")],1)])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.php.net/manual/en/pdo.prepared-statements.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prepared Statements"),a("OutboundLink")],1),t._v(" are like compiled templates for SQL that two major benefits over plain SQL queries. The first is that prepared statement only need to be prepared once, but can be executed multiple times. This can optimize database procedures when working with complex queries. The second major benefit is the build-in security. Prepared statements automatically handle quoting, which will help prevent SQL injections. Therefore, prepared statement is crucial any time a query is dependent on values coming from the user.")]),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("The following example shows how SQL injection could happen.")]),t._v(" "),t._m(2),a("p",[t._v("If the above code what allowed to execute, it could the cause the movies table to be deleted. This is why it is always important to protect against SQL injection and prepared statements are on way to do that.")]),t._v(" "),t._m(3),t._v(" "),a("p",[t._v("PDO supports two forms for implementing prepared statements: named parameters and anonymous placeholders. These will be placed inside of the query statement as placeholders for data, which will be added later. We will only cover named parameters in this course.")]),t._v(" "),a("p",[t._v("To use a named parameter inside of a prepared statement, we first start with a colon followed by the parameter name and place it inside of the query statement.")]),t._v(" "),t._m(4),a("p",[t._v("Then the "),a("a",{attrs:{href:"https://www.php.net/manual/en/pdo.prepare.php",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("prepare()")]),a("OutboundLink")],1),t._v(" method is used to prepare the prepared statement. The method will also return the statement object.")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),t._v(" "),a("p",[t._v("The "),a("a",{attrs:{href:"https://www.php.net/manual/en/pdostatement.bindparam.php",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("bindParam()")]),a("OutboundLink")],1),t._v(" and the "),a("a",{attrs:{href:"https://www.php.net/manual/en/pdostatement.bindvalue.php",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("bindValue()")]),a("OutboundLink")],1),t._v(" are very similar but do have very crucial difference. The "),a("code",[t._v("bindParam()")]),t._v(" method only works with a variable and will not evaluate until the statement is executed.")]),t._v(" "),t._m(9),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),a("p",[t._v("There are many data_type constants can be applied to the both of these methods. You can see all of the available constants on the "),a("a",{attrs:{href:"https://www.php.net/manual/en/pdo.constants.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("PDO Constants"),a("OutboundLink")],1),t._v(" page.")])]),t._v(" "),t._m(10),t._m(11),t._v(" "),a("p",[t._v("The final step of using a prepared statement is the execute the statement with the database. This is accomplished using the "),a("a",{attrs:{href:"https://www.php.net/manual/en/pdostatement.execute.php",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("execute()")]),a("OutboundLink")],1),t._v(" method.")]),t._v(" "),t._m(12)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"prepared-statements"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prepared-statements","aria-hidden":"true"}},[this._v("#")]),this._v(" Prepared Statements")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"sql-injection"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sql-injection","aria-hidden":"true"}},[this._v("#")]),this._v(" SQL Injection")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require_once")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"db.php"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$movie")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$_GET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'movie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ';DROP TABLE movies;'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$sql")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v("\"SELECT * FROM movies WHERE movie_title = '"),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$movie")])]),t._v("'\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$db")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$sql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"creating-a-prepared-statement"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-prepared-statement","aria-hidden":"true"}},[this._v("#")]),this._v(" Creating a Prepared Statement")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require_once")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"db.php"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$sql")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"SELECT * FROM movies WHERE movie_title = :movie_title"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("NOTE")]),this._v(" "),e("p",[this._v("The "),e("code",[this._v("prepare()")]),this._v(" method does not execute the statement. It is merely creates a template that can be used later with the desired data.")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require_once")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"db.php"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$sql")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"SELECT * FROM movies WHERE movie_title = :movie_title"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$stmt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$db")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prepare")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$sql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"binding-data"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#binding-data","aria-hidden":"true"}},[this._v("#")]),this._v(" Binding Data")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("Once a prepared statement has been created, it is ready for the data. This can be down in two ways: directly using the methods "),a("code",[t._v("bindParam()")]),t._v(" and "),a("code",[t._v("bindValue()")]),t._v(" or by passing an array the "),a("code",[t._v("execute()")]),t._v(" method. We will cover the latter method on the next page, for now we will cover "),a("code",[t._v("bindParam()")]),t._v(" and "),a("code",[t._v("bindValue()")]),t._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The example below binds the "),e("code",[this._v("$_GET['movie']")]),this._v(" to the prepared statement using the "),e("code",[this._v("bindValue()")]),this._v(" method. The data type is explicitly set using the "),e("em",[this._v("PDO::PARAM_STR")]),this._v(" constant.")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require_once")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"db.php"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$sql")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"SELECT * FROM movies WHERE movie_title = :movie_title"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$stmt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$db")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prepare")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$sql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$stmt")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bindValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("':movie_title'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$_GET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'movie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PDO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PARAM_STR")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"executing-a-prepared-statement"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#executing-a-prepared-statement","aria-hidden":"true"}},[this._v("#")]),this._v(" Executing a Prepared Statement")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require_once")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"db.php"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$sql")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"SELECT * FROM movies WHERE movie_title = :movie_title"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$stmt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$db")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prepare")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$sql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$stmt")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bindValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("':movie_title'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$_GET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'movie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PDO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PARAM_STR")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$stmt")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}],!1,null,null,null);e.default=n.exports}}]);